<div
  *ngIf="comic; else empty"
  class="relative w-full flex bg-slate-100 rounded-xl h-44 overflow-hidden"
>
  <div class="flex-shrink-0 h-full p-2 overflow-hidden">
    <img
      class="shadow-md object-cover w-auto h-full rounded-md"
      src="{{ comic.coverImage }}"
      alt="Cover image"
    />
  </div>
  <div class="flex flex-col pl-2 pr-4 py-1">
    <div class="w-full flex justify-between">
      <a
        [routerLink]="['/truyen-tranh', comic.url]"
        class="font-bold uppercase my-1 text-base"
        ><h4>{{ comic.title }}</h4></a
      >
      <p class="text-xs my-1 text-gray-400">{{ comic.updateAt | dateAgo }}</p>
    </div>

    <div class="flex space-x-1">
      <a
        *ngFor="let tag of comic?.genres | slice: 0 : 3; index as i"
        class="tag bg-accent"
      >
        @if (i == 0) {
          <span
            class="bg-amber-600 cursor-pointer text-xs font-bold rounded shadow-sm px-2 uppercase text-white"
            >{{ tag.title }}</span
          >
        } @else {
          <span
            class="bg-white text-[0.7rem] cursor-pointer font-semibold rounded shadow-sm px-2 uppercase"
          >
            {{ tag.title }}
          </span>
        }
      </a>
    </div>
    <div class="flex gap-3">
      <div class="text-sm text-center flex gap-1 items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="feather feather-star icon rel"
          viewBox="0 0 24 24"
          style="color: currentcolor"
        >
          <path
            d="m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"
          ></path></svg
        >{{ comic.rating }}
      </div>
      <div class="text-sm text-center flex gap-1 items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="none"
          viewBox="0 0 24 24"
          class="icon small text-icon-contrast text-undefined"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
          ></path>
        </svg>
        {{ comic.rating }}
      </div>
      <div class="text-sm text-center uppercase flex gap-1 items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="feather feather-eye icon small text-icon-contrast text-undefined"
          viewBox="0 0 24 24"
        >
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        {{ comic.viewCount | numeral }}
      </div>
      <div
        class="text-sm text-center comment-container flex gap-2 items-center"
      >
        @if (comic.status === 0) {
          <div
            class="animate-ping h-1 w-1 rounded-full bg-sky-400 opacity-75"
          ></div>
          <div>Đang tiến hành</div>
        } @else {
          <svg
            class="animate-ping opacity-75"
            xmlns="http://www.w3.org/2000/svg"
            height="6"
            width="6"
            viewBox="0 0 512 512"
          >
            <path
              fill="#2debb2"
              d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"
            />
          </svg>
          <div>Đã hoàn thành</div>
        }
      </div>
      <!---->
    </div>
    <div class="mt-2">
      <p class="line-clamp-3 text-sm">
        {{ comic.description }}
      </p>
    </div>
  </div>
</div>

<ng-template #empty>
  <div class="relative w-full flex rounded-xl h-44 overflow-hidden shadow-sm">
    <div
      class="w-1/3 h-full animate-pulse bg-gray-300 relative rounded-md flex justify-center items-center"
    >
      <svg
        class="w-10 h-10 text-gray-200 dark:text-gray-600"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 20 18"
      >
        <path
          d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"
        />
      </svg>
    </div>
    <div
      class="relative w-full flex bg-slate-100 rounded-xl h-44 overflow-hidden animate-pulse"
    >
      <div class="flex-shrink-0 h-full p-2 overflow-hidden">
        <div class="bg-gray-200 w-full h-full rounded-md"></div>
      </div>
      <div class="flex flex-col pl-2 pr-4 py-1 w-full">
        <div class="bg-gray-200 h-6 my-1 rounded-md"></div>
        <div class="flex space-x-1">
          <div class="bg-gray-200 h-4 w-16 rounded-md"></div>
          <div class="bg-gray-200 h-4 w-16 rounded-md"></div>
          <div class="bg-gray-200 h-4 w-16 rounded-md"></div>
        </div>
        <div class="flex gap-4 mt-2"></div>
        <div class="bg-gray-200 h-20 w-full mt-2 rounded-md"></div>
      </div>
    </div>
  </div>
</ng-template>
