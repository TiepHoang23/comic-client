<!-- <ng-container *ngIf="comic"> -->

<div class="h-full flex flex-col relative border-spacing-3 overflow-hidden">
  <div
    class="container flex items-center font-bold text-base text-gray-50 mt-3"
  >
    <span><a> HOME </a> </span>
    <span class="mx-2">
      <svg
        height="12px"
        width="12px"
        viewBox="0 0 330 330"
        xml:space="preserve"
      >
        <path
          id="XMLID_222_"
          d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"
        />
      </svg>
    </span>
    <span><a> Action </a></span>
    <span class="mx-2">
      <svg
        height="12px"
        width="12px"
        viewBox="0 0 330 330"
        xml:space="preserve"
      >
        <path
          id="XMLID_222_"
          d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"
        />
      </svg>
    </span>
    <span>Lost Powers Restored: Unlocking a New Skill Every Day</span>
  </div>
  <div class="absolute inset-0 h-full border-spacing-2 -z-10 blur-sm">
    @if (comic) {
      <div
        class="w-full h-full bg-cover bg-black bg-no-repeat"
        style="background-image: url('{{ comic.coverImage }}');"
      >
        <div class="absolute inset-0 bg-black opacity-55"></div>
      </div>
    } @else {
      <div class="w-full h-full animate-pulse bg-gray-400"></div>
    }
  </div>
  <!-- Dark overlay -->

  <div
    class="flex rounded-t-3xl container mt-10 z-5 bg-white"
    style="
      border-top: 0.138889rem solid hsla(0, 0%, 42%, 0.8);
      border-left: 0.138889rem solid hsla(0, 0%, 42%, 0.8);
      border-right: 0.138889rem solid hsla(0, 0%, 42%, 0.8);
    "
  >
    @if (comic) {
      <div class="ml-10">
        <div
          class="flex shadow-md justify-center rounded relative bottom-5 border-gray-200 border-2 overflow-hidden"
          style="width: 200px; height: 300px"
        >
          <img
            class="flex justify-center object-cover"
            src="{{ comic.coverImage }}"
            alt="{{ comic.title }}"
          />
        </div>

        <div class="mb-3 flex justify-center">
          <button
            type="button"
            class="py-2 px-4 bg-blue-500 text-white rounded hover:bg-blue-600 flex space-x-1 items-center"
            (click)="goBack()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="20"
              width="20"
              viewBox="0 0 512 512"
            >
              <path
                fill="#ffffff"
                d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"
              />
            </svg>
            Theo dõi
          </button>
        </div>
      </div>

      <div class="mx-4 mt-3">
        <h1 class="other-name font-semibold uppercase text-2xl">
          {{ comic.title }}
        </h1>
        <p class="col-xs-8 uppercase font-thin">{{ comic.author }}</p>
        <app-star-rating [initialRating]="comic.rating"></app-star-rating>
        <ul class="list-info space-y-2 text-sm mt-2">
          <div class="flex space-x-7 text-sm">
            <li>
              <p class="name text"><i class="fa fa-eye"></i> Chapters:</p>
              <div class="flex space-x-2 items-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="14"
                  width="15.75"
                  viewBox="0 0 576 512"
                >
                  <path
                    d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"
                  />
                </svg>
                <p class="number font-semibold">
                  {{ comic.chapters.length }}
                </p>
              </div>
            </li>
            <li>
              <p class="name text">Lượt xem:</p>
              <div class="flex space-x-2 items-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="14"
                  width="15.75"
                  viewBox="0 0 576 512"
                >
                  <path
                    d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"
                  />
                </svg>
                <p class="font-semibold uppercase">
                  {{ comic.viewCount | numeral: "0.0a" }}
                </p>
              </div>
            </li>
            <li>
              <p class="name text">Xếp hạng:</p>
              <div class="flex space-x-2 items-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="14"
                  width="10.5"
                  viewBox="0 0 384 512"
                >
                  <path
                    d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"
                  />
                </svg>
                <p class="ratingValue font-semibold">
                  {{ comic.rating }}
                </p>
              </div>
            </li>

            <li>
              <p class="name col-xs-4"><i class="fa fa-rss"></i> Tình trạng:</p>
              <div class="flex space-x-2 items-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="12"
                  width="12"
                  viewBox="0 0 512 512"
                >
                  <ng-container *ngIf="comic.status == 0; else elseBlock">
                    <path
                      d="M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"
                    />
                  </ng-container>
                  <ng-template #elseBlock>
                    <path
                      fill="#63E6BE"
                      d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"
                    />
                  </ng-template>
                </svg>
                <p class="ratingValue font-semibold">
                  {{ comic.status == 0 ? "Đang tiến hành" : "Đã hoàn thành" }}
                </p>
              </div>
            </li>
            <!-- <li class="mrt5 mrb10 flex space-x-2">
                <p class="name text">Xếp hạng:</p>
               
              </li> -->
          </div>
          <li class="kind row flex space-x-2">
            <p class="col-xs-8">
              <!-- Assuming comic.categories is an array of category names -->
              <ng-container *ngFor="let category of comic.genres">
                <a
                  class="category font-semibold hover:text-gray-500 h-6 px-2 mx-1 text-sm bg-gray-100 hover:border-transparent rounded"
                  type="button"
                  href="#"
                  >{{ category.title }}</a
                >
              </ng-container>
            </p>
          </li>
        </ul>

        <div class="row rating">
          <div class="col-xs-6">
            <div
              class="star"
              data-id="83850"
              data-allowrating="true"
              style="cursor: pointer"
            >
              <!-- You may need to implement the star rating logic here -->
            </div>
          </div>
          <div
            class="col-xs-6 lazy-module"
            data-type="facebook"
            style="overflow: hidden"
          >
            <!-- Facebook like button code -->
          </div>
        </div>
        <div class="follow">
          <!-- Follow button and follower count -->
        </div>

        <!-- <p class="shortened line-clamp-3 mt-2 text-sm mr-4">
            {{ comic.description }}
          </p> -->
        <div class="description inline">
          <div
            [class.line-clamp-3]="!isOpen"
            class="shortened line-clamp-3 mt-2 text-sm mr-4"
          >
            {{ comic.description }}
          </div>
          <button
            class="text-sm font-semibold hover:text-gray-700"
            (click)="isOpen = !isOpen"
          >
            <span *ngIf="!isOpen">Xem thêm</span>
            <span *ngIf="isOpen">Ẩn</span>
          </button>
        </div>

        <div class="read-action flex space-x-2 mt-3">
          <a
            class="btn btn-warning text-white flex items-center space-x-2 w-32 max-w-xs"
            routerLink="/truyen-tranh/{{ comic.url }}"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="16"
              width="16"
              viewBox="0 0 448 512"
              class="w-4 h-4"
            >
              <path
                fill="#ffffff"
                d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"
              />
            </svg>
            <span class="font-semibold text-sm">Đọc từ đầu</span>
          </a>

          <a
            class="btn border border-blue-500 rounded text-blue-500 font-semibold text-sm"
          >
            Đọc mới nhất</a
          >
        </div>
      </div>
    } @else {
      <div
        class="mx-auto h-full animate-pulse flex items-center justify-between"
        style="height: 350px"
      >
        <div
          aria-label="Loading..."
          role="status"
          class="flex items-center space-x-2"
        >
          <svg
            class="h-20 w-20 animate-spin stroke-gray-500"
            viewBox="0 0 256 256"
          >
            <line
              x1="128"
              y1="32"
              x2="128"
              y2="64"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="195.9"
              y1="60.1"
              x2="173.3"
              y2="82.7"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="224"
              y1="128"
              x2="192"
              y2="128"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="195.9"
              y1="195.9"
              x2="173.3"
              y2="173.3"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="128"
              y1="224"
              x2="128"
              y2="192"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="60.1"
              y1="195.9"
              x2="82.7"
              y2="173.3"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="32"
              y1="128"
              x2="64"
              y2="128"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
            <line
              x1="60.1"
              y1="60.1"
              x2="82.7"
              y2="82.7"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="24"
            ></line>
          </svg>
          <span class="text-4xl font-medium text-gray-500">Loading...</span>
        </div>
      </div>
    }
  </div>
  <!-- </div> -->
</div>
<div class="grid grid-cols-3 gap-4 container">
  <div class="col-span-2">
    <h3 class="list-title font-semibold uppercase mt-3 flex">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="20"
        width="20"
        viewBox="0 0 512 512"
      >
        <path
          d="M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"
        />
      </svg>
      <span class="ml-2"> Danh sách chương</span>
    </h3>
    <div
      #SrollElement
      class="grid grid-cols-3 gap-3 relative snap-proximity snap-y overflow-y-auto mt-4"
      style="scroll-snap-type: y mandatory; height: 500px"
    >
      <div
        id="overlay"
        class="absolute -z-50"
        style="width: 100%; height: 1000px"
      ></div>
      <div
        class="mr-3"
        *ngFor="let chapter of comicChapters"
        [ngClass]="{ 'chapter-1-50': $index >= 1 && $index <= 50 }"
        style="scroll-snap-align: start"
        id="chapter-{{ $index }}"
      >
        <a href="/truyen-tranh/{{ comic.url }}/chapter/{{ chapter.id }}">
          <div
            class="h-14 flex items-center col-span-1 bg-gray-100 text-sm hover:bg-gray-200 rounded-lg px-2 py-1 cursor-pointer tooltip-trigger select-none"
          >
            <div class="p-1">
              <!-- Chapter Title -->
              <p class="font-medium">#{{ chapter.chapterTitle }}</p>
              <p class="text-[0.75rem] text-gray-500">
                {{ chapter.viewCount | numeral }} views
              </p>
            </div>
            <div class="ml-auto p-1">
              <div class="text-sm text-gray-500">
                {{ chapter.updateAt | dateAgo }}
              </div>
            </div>
          </div>
        </a>
        <!-- Link to Comments -->
      </div>
    </div>
    <grid-comic
      [listComics]="listTopComics!"
      [num_preview]="10"
      [_title]="'Truyện tương tự'"
      [_class]="
        'grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6'
      "
    >
    </grid-comic>
  </div>
  <div
    *ngIf="listTopComics"
    class="flex flex-col items-center w-full col-span-1 border border-gray-300 mt-3"
  >
    <div class="text-xl font-bold mt-2">TOP TUẦN</div>
    <app-top-list [listTopComics]="listTopComics"></app-top-list>
  </div>
</div>

<!-- </ng-container> -->
